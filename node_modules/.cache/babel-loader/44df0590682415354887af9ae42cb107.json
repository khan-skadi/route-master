{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Skadi\\\\Projects\\\\truck-dispatcher-working_branch2_router\\\\src\\\\components\\\\logs\\\\PickProfileImage.js\";\nimport React, { Component } from \"react\";\nimport { storage } from \"../../index\";\nimport { connect } from \"react-redux\";\nexport class PickProfileImage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.sendUrl = () => {\n      this.props.parentCallback(this.state.url);\n    };\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        const image = e.target.files[0];\n        this.setState(() => ({\n          image\n        }));\n      }\n    };\n\n    this.handleUpload = () => {\n      this.sendUrl();\n      const image = this.state.image;\n      const uploadTask = storage.ref(`images/${image.name}`).put(image);\n      uploadTask.on(\"state_changed\", snapshot => {\n        // progress function\n        const progress = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        this.setState({\n          progress\n        });\n      }, error => {\n        console.log(error);\n      }, () => {\n        // complete function\n        storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          console.log(url);\n          this.setState({\n            url\n          });\n        });\n      });\n    };\n\n    this.state = {\n      image: null,\n      url: \"\",\n      progress: 0\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleUpload = this.handleUpload.bind(this);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"progress\", {\n      value: this.state.progress,\n      max: \"100\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.handleChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.handleUpload,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Upload\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: this.state.url,\n      alt: \"\",\n      height: \"300\",\n      width: \"400\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }));\n  }\n\n}\nexport default connect()(PickProfileImage);","map":{"version":3,"sources":["C:/Users/Skadi/Projects/truck-dispatcher-working_branch2_router/src/components/logs/PickProfileImage.js"],"names":["React","Component","storage","connect","PickProfileImage","constructor","props","sendUrl","parentCallback","state","url","handleChange","e","target","files","image","setState","handleUpload","uploadTask","ref","name","put","on","snapshot","progress","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","bind","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { storage } from \"../../index\";\r\nimport { connect } from \"react-redux\";\r\n\r\nexport class PickProfileImage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      image: null,\r\n      url: \"\",\r\n      progress: 0\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleUpload = this.handleUpload.bind(this);\r\n  }\r\n\r\n  sendUrl = () => {\r\n    this.props.parentCallback(this.state.url);\r\n  };\r\n\r\n  handleChange = e => {\r\n    if (e.target.files[0]) {\r\n      const image = e.target.files[0];\r\n      this.setState(() => ({ image }));\r\n    }\r\n  };\r\n\r\n  handleUpload = () => {\r\n    this.sendUrl();\r\n    const { image } = this.state;\r\n    const uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n    uploadTask.on(\r\n      \"state_changed\",\r\n      snapshot => {\r\n        // progress function\r\n        const progress = Math.round(\r\n          (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n        );\r\n        this.setState({ progress });\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      },\r\n      () => {\r\n        // complete function\r\n        storage\r\n          .ref(\"images\")\r\n          .child(image.name)\r\n          .getDownloadURL()\r\n          .then(url => {\r\n            console.log(url);\r\n\r\n            this.setState({ url });\r\n          });\r\n      }\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <progress value={this.state.progress} max=\"100\" />\r\n        <br />\r\n        <input type=\"file\" onChange={this.handleChange} />\r\n        <button onClick={this.handleUpload}>Upload</button>\r\n        <br />\r\n        <img src={this.state.url} alt=\"\" height=\"300\" width=\"400\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect()(PickProfileImage);\r\n"]},"metadata":{},"sourceType":"module"}